<mat-stepper orientation="vertical" [linear]="true">
  <mat-step>
    <ng-template matStepLabel>
      Choose books for training
      <mat-icon class="material-icons-outlined" [matMenuTriggerFor]="trainingInfo">info</mat-icon>
    </ng-template>
    <app-book-multi-select
      [availableBooks]="(availableBooks$ | async) ?? []"
      [selectedBooks]="selectedBooks"
      (bookSelect)="onBookSelect($event)"
    >
    </app-book-multi-select>
    <div class="stepper-nav">
      <button mat-flat-button [disabled]="!selectedBooks.length" matStepperNext color="primary">Next</button>
    </div>
  </mat-step>

  <mat-step>
    <ng-template matStepLabel>Confirm books and generate</ng-template>
    <app-book-multi-select
      [availableBooks]="selectedBooks"
      [selectedBooks]="selectedBooks"
      (bookSelect)="onBookSelect($event)"
    ></app-book-multi-select>
    <p *ngIf="!selectedBooks.length">Click "Back" to select books.</p>
    <div class="stepper-nav">
      <button *ngIf="!selectedBooks.length" mat-flat-button matStepperPrevious color="primary">Back</button>
      <button *ngIf="selectedBooks.length" mat-stroked-button matStepperPrevious>Back</button>
      <button mat-flat-button [disabled]="!selectedBooks.length" matStepperNext (click)="onDone()" color="primary">
        Generate draft
      </button>
    </div>
  </mat-step>
</mat-stepper>

<mat-menu #trainingInfo="matMenu" class="draft-generation-steps-info-menu">
  <mat-icon class="material-icons-outlined">info</mat-icon>
  Choose books with the most polished translations, as these will be used to train the model.
</mat-menu>
