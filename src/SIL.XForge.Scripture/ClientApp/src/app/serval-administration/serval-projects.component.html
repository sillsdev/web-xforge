<div class="projects-controls">
  <mat-form-field appearance="fill">
    <mat-label>Filter projects...</mat-label>
    <input matInput (keyup)="updateSearchTerm($event.target)" id="project-filter" />
  </mat-form-field>
</div>
<ng-container *ngIf="!isLoading">
  <ng-container *ngIf="length > 0">
    <table mat-table id="projects-table" [dataSource]="rows">
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let row">
          <a [appRouterLink]="['/serval-administration', row.id]">{{ row.name }}</a>
        </td>
      </ng-container>
      <ng-container matColumnDef="preTranslate">
        <th mat-header-cell *matHeaderCellDef>Pre-Translation</th>
        <td mat-cell *matCellDef="let row">
          <strong *ngIf="row.preTranslate">Enabled</strong>
          <span *ngIf="!row.preTranslate">Disabled</span>
        </td>
      </ng-container>
      <ng-container matColumnDef="source">
        <th mat-header-cell *matHeaderCellDef>Source</th>
        <td mat-cell *matCellDef="let row">
          <a *ngIf="row.sourceId != null" [appRouterLink]="['/serval-administration', row.sourceId]">{{
            row.source
          }}</a>
          <span *ngIf="row.sourceId == null">{{ row.source }}</span>
        </td>
      </ng-container>
      <ng-container matColumnDef="alternateSource">
        <th mat-header-cell *matHeaderCellDef>Alternate Source</th>
        <td mat-cell *matCellDef="let row">
          <a
            *ngIf="row.alternateSourceId != null"
            [appRouterLink]="['/serval-administration', row.alternateSourceId]"
            >{{ row.alternateSource }}</a
          >
          <span *ngIf="row.alternateSourceId == null">{{ row.alternateSource }}</span>
        </td>
      </ng-container>
      <ng-container matColumnDef="alternateTrainingSource">
        <th mat-header-cell *matHeaderCellDef>Alternate Training Source</th>
        <td mat-cell *matCellDef="let row">
          <a
            *ngIf="row.alternateTrainingSourceId != null"
            [appRouterLink]="['/serval-administration', row.alternateTrainingSourceId]"
            >{{ row.alternateTrainingSource }}</a
          >
          <span *ngIf="row.alternateTrainingSourceId == null">{{ row.alternateTrainingSource }}</span>
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
      <tr mat-row *matRowDef="let row; columns: columnsToDisplay"></tr>
    </table>

    <mat-paginator
      [pageIndex]="pageIndex"
      [length]="length"
      [pageSize]="pageSize"
      [pageSizeOptions]="[5, 10, 20, 50, 100]"
      (page)="updatePage($event.pageIndex, $event.pageSize)"
    >
    </mat-paginator>
  </ng-container>
  <div *ngIf="length === 0" class="no-projects-label">No projects found</div>
</ng-container>
