<ng-container *transloco="let t; read: 'book_select'">
  @if (availableBooks.length > 0 && !readonly) {
    <div>
      <mat-checkbox
        value="OT"
        [checked]="selectedAllOT"
        [disabled]="!isOldTestamentAvailable()"
        [(indeterminate)]="partialOT"
        (change)="select($event.checked ? 'OT' : 'clearOT')"
      >
        {{ t("old_testament") }}
      </mat-checkbox>
      <mat-checkbox
        value="NT"
        [checked]="selectedAllNT"
        [(indeterminate)]="partialNT"
        [disabled]="!isNewTestamentAvailable()"
        (change)="select($event.checked ? 'NT' : 'clearNT')"
      >
        {{ t("new_testament") }}
      </mat-checkbox>

      @if (isDeuterocanonAvailable()) {
        <mat-checkbox
          value="DC"
          [checked]="selectedAllDC"
          (change)="select($event.checked ? 'DC' : 'clearDC')"
          [(indeterminate)]="partialDC"
        >
          {{ t("deuterocanon") }}
        </mat-checkbox>
      }
    </div>
  }
  <div class="flex-row">
    @for (book of bookOptions; track book) {
      <mat-chip-listbox
        hideSingleSelectionIndicator
        [selectable]="!readonly"
        class="book-multi-select"
        [disabled]="readonly"
        (change)="onChipListChange(book)"
      >
        <mat-chip-option [value]="book" [selected]="book.selected">
          {{ "canon.book_names." + book.bookId | transloco }}
          <div class="border-fill" [style.width]="book.progressPercentage + '%'"></div>
        </mat-chip-option>
      </mat-chip-listbox>
    }
  </div>
</ng-container>
